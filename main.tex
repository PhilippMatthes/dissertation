\documentclass[
  ngerman,english, % change to ngerman for german theses
  BCOR=0mm,cdgeometry=no, % use two-side for booklike layouts
  numbers=noenddot, % remove trailing dots in chapter/section/... enumeration
  cd=fullcolor,
  headings=heavy,
  chapterpage=true,
  cdfont=off, % modify this to use the TUD font (Open Sans)
  sfdefaults=false,
]{tudscrmanual}

% use a custom serif font
\usepackage[bitstream-charter]{mathdesign}

\newcommand{\mathdefault}[1][]{}

\usepackage[hyphens]{url}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[
  english % change to ngerman for german theses
]{babel}
\usepackage{isodate}
\usepackage{pdfpages}
\usepackage{listings}
\usepackage[toc, page]{appendix}
\usepackage{hyphenat}

\usepackage[
  citestyle=numeric-comp,
  bibstyle=ieee,
  backend=biber,
  url=false,
  doi=true,
  isbn=true,
  backref=true,
  hyperref,
]{biblatex}
% configure the location of the biblatex file
\addbibresource{students.bib}
\addbibresource{papers.bib}
\addbibresource{bibliography.bib}
\AtEveryBibitem{%
  \clearfield{note}%
}
\BiblatexSplitbibDefernumbersWarningOff

\usepackage{graphicx}
\graphicspath{ {./} }
\usepackage{svg}

\usepackage{caption}
\captionsetup{font={footnotesize},labelsep=colon,justification=centering,format=plain}
\captionsetup[table]{position=bottom}
\usepackage{floatrow}
\floatsetup{font=normalfont}
\floatsetup[table]{capposition=bottom}
\DeclareCaptionSubType[alph]{figure}
\DeclareCaptionSubType[alph]{table}

\usepackage{booktabs}
\usepackage{longtable}

\usepackage{enumitem}
\setlist[itemize]{noitemsep}
\setlist{parsep=0pt,listparindent=\parindent}

\usepackage{float}
\usepackage{pgf}

% configure the name of your appendix
\renewcommand\appendixtocname{Appendix}
\renewcommand\appendixpagename{Appendix}

% use \tocless before a chapter/section/... in the
% appendix to hide it from the toc
\newcommand{\nocontentsline}[3]{}
\newcommand{\tocless}[2]{
  \bgroup\let\addcontentsline=\nocontentsline#1{#2}\egroup
}

\usepackage{amsmath}

% https://github.com/priobike/priobike-flutter-app/blob/dev/lib/common/layout/ci.dart
\definecolor{ciblue}{HTML}{0069b4}
\definecolor{cidarkblue}{HTML}{00305D}
\usepackage[colorlinks=true,allcolors=ciblue]{hyperref}%
\usepackage[capitalise,nameinlink,noabbrev]{cleveref} % Must be loaded after amsmath
\hypersetup{
  colorlinks=true,
  linkcolor=cidarkblue,
  filecolor=cidarkblue,
  citecolor=cidarkblue,      
  urlcolor=cidarkblue,
}

\usepackage{listings}
\definecolor{background}{HTML}{F6F6FE}
\usepackage[scaled=0.85]{beramono}
\lstdefinelanguage{python}{
    basicstyle=\ttfamily\footnotesize,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{cidarkblue}0}}}{1}
      {1}{{{\color{cidarkblue}1}}}{1}
      {2}{{{\color{cidarkblue}2}}}{1}
      {3}{{{\color{cidarkblue}3}}}{1}
      {4}{{{\color{cidarkblue}4}}}{1}
      {5}{{{\color{cidarkblue}5}}}{1}
      {6}{{{\color{cidarkblue}6}}}{1}
      {7}{{{\color{cidarkblue}7}}}{1}
      {8}{{{\color{cidarkblue}8}}}{1}
      {9}{{{\color{cidarkblue}9}}}{1}
      {:}{{{\color{cidarkblue}{:}}}}{1}
      {,}{{{\color{cidarkblue}{,}}}}{1}
      {\{}{{{\color{cidarkblue}{\{}}}}{1}
      {\}}{{{\color{cidarkblue}{\}}}}}{1}
      {[}{{{\color{cidarkblue}{[}}}}{1}
      {]}{{{\color{cidarkblue}{]}}}}{1},
}

\usepackage{mdframed}
\newcounter{Summary}[section]
\newenvironment{Summary}[1][]{%
    \stepcounter{Summary}%
    \begin{mdframed}[
        linewidth=2,
        linecolor=cidarkblue,
        innertopmargin=-18pt, 
        innerbottommargin=0em, 
        innerleftmargin=0em,
        innerrightmargin=16pt,
        topline=false, 
        leftline=false, 
        bottomline=false
    ]
    \subsubsection*{#1}
}{%
    \end{mdframed}
}

% use this custom theorem for research questions
\newtheorem{researchquestion}{Research Question}
\crefname{researchquestion}{Research Question}{Research Questions}

\renewcommand{\floatpagefraction}{1}
\renewcommand{\textfraction}{0}
\usepackage[all]{nowidow}% Avoid orphaned lines on new pages

\setlength{\parindent}{0cm}
\setlength{\parskip}{0.3cm plus 1mm minus 1mm}
\setlength{\intextsep}{0.6cm}

\begin{document}
\addtokomafont{disposition}{\rmfamily}
\addtokomafont{title}{\rmfamily}
\addtokomafont{titlepage}{\rmfamily}
\addtokomafont{thesis}{\rmfamily}
\addtokomafont{tudheadings}{\rmfamily}
\addtokomafont{partsubtitle}{\rmfamily}
\addtokomafont{chaptersubtitle}{\rmfamily}
\addtokomafont{author}{\rmfamily}
\addtokomafont{caption}{\rmfamily}
\addtokomafont{captionlabel}{\rmfamily}
\addtokomafont{chapter}{\rmfamily}
\addtokomafont{chapterentry}{\rmfamily}
\addtokomafont{chapterentrydots}{\rmfamily}
\addtokomafont{chapterentrypagenumber}{\rmfamily}
\addtokomafont{chapterprefix}{\rmfamily}
\addtokomafont{date}{\rmfamily}
\addtokomafont{dedication}{\rmfamily}
\addtokomafont{descriptionlabel}{\rmfamily}
\addtokomafont{dictum}{\rmfamily}
\addtokomafont{dictumtext}{\rmfamily}
\addtokomafont{footnote}{\rmfamily}
\addtokomafont{footnotelabel}{\rmfamily}
\addtokomafont{footnotereference}{\rmfamily}
\addtokomafont{footnoterule}{\rmfamily}
\addtokomafont{labelinglabel}{\rmfamily}
\addtokomafont{labelingseparator}{\rmfamily}
\addtokomafont{minisec}{\rmfamily}
\addtokomafont{pagefoot}{\rmfamily}
\addtokomafont{pagehead}{\rmfamily}
\addtokomafont{pageheadfoot}{\rmfamily}
\addtokomafont{pagenumber}{\rmfamily}
\addtokomafont{pagination}{\rmfamily}
\addtokomafont{paragraph}{\rmfamily}
\addtokomafont{part}{\rmfamily}
\addtokomafont{partentry}{\rmfamily}
\addtokomafont{partentrypagenumber}{\rmfamily}
\addtokomafont{partnumber}{\rmfamily}
\addtokomafont{publishers}{\rmfamily}
\addtokomafont{section}{\rmfamily}
\addtokomafont{sectioning}{\rmfamily}
\addtokomafont{subject}{\rmfamily}
\addtokomafont{subparagraph}{\rmfamily}
\addtokomafont{subsection}{\rmfamily}
\addtokomafont{subsubsection}{\rmfamily}
\addtokomafont{subtitle}{\rmfamily}
\addtokomafont{title}{\rmfamily}
\addtokomafont{titlehead}{\rmfamily}

\faculty{Faculty of Computer Science}
\department{}
\institute{Institute of Systems Architecture}
\chair{Chair of Distributed and Networked Systems}
\title{\huge Green Light Optimal Speed Advisory\\for Bikes}

\thesis{phd} % the type of thesis you want to write
\graduation[\Large Dr.-Ing.]{\Large Doctor of Engineering}

\author{Dipl.-Inf. Philipp Matthes}
\dateofbirth{12.3.1997}
\placeofbirth{Chemnitz}

\referee{Prof. Dr.-Ing. Christoph Sommer \and Prof. Dr.-Ing. habil. Monika Sester}
\advisor{Dr.-Ing. Thomas Springer}
\date{} % the date of submission
\maketitle

\newcommand\setcurrentname[1]{\def\@currentlabelname{#1}} % See https://tex.stackexchange.com/questions/569570/nameref-not-working-with-starred-sections

\sloppy

\TUDoption{abstract}{section,multiple}
\renewcommand\abstractname{Abstract}
\begin{abstract}
Promoting cycling is a crucial solution to improve the livability of urban environments. A non-invasive way to promote cycling is to enhance the bike ride experience via Green Light Optimal Speed Advisory (bike-GLOSA). This work presents such a system for Hamburg, making bike-GLOSA practical in real-world urban environments and evaluating its impact on cyclists. The first challenge to overcome is predicting the switching behavior of thousands of traffic lights and making this information available to cyclists. We establish a data infrastructure that ingests real-time data from thousands of traffic lights throughout the city. Through a long-term study, we find that data outages require robust prediction, thorough monitoring, and quality assurance to operate a bike-GLOSA system on a centralized data infrastructure. Affected by data outages, the deployed probabilistic prediction algorithm achieves a median availability of 55\% (max: 91\%) and prediction quality of 86\%. Based on 4 weeks of data for 18,009 traffic lights, we analyze the general predictability and contrast previous work. Afterward, we develop a novel method to match traffic lights along the user's trajectory. Instead of using the user's location or camera, our method matches traffic lights along a precalculated bike route geometry. However, errors and inaccuracies in bike routes challenge this approach, requiring an advanced model that employs spatial reasoning to find which associated traffic light turn geometries match the given route geometry. The final model achieves matching F1 scores of 92\% and 86\% validated on a separate dataset, requiring a median extra time of 1.4 seconds during bike route (re-)calculation. Building on these results, we focus on reducing the overall number of bike routing errors and enhancing route alignment with actual bike paths. Our solution involves an authoritative bike routing dataset and cross-border routing to OpenStreetMap. Apart from a more consistent surface coverage, we find better alignment with actual cycling infrastructure, traffic lights, and user trajectories compared to other routing providers. Enhanced alignment and 37\% fewer routing errors lead to a 4.74\% increase in traffic light matching F1 score. A route-based distance-to-signal estimation is proposed, showing a more stable distance estimation compared to the over-the-air distance from related work. Finally, combining in-app bike routing with a speedometer visualization of the traffic light prediction, a mobile app is developed that provides city-wide access to the bike-GLOSA system. By inviting Hamburg citizens and studying their app usage over the course of 2023, we find a twofold effect of the speed advisory. Adherence to the speed advisory leads to 15.32\% fewer stops but a 3.3\% increase in energy expenditure to catch the green phase by cycling 2.92 km/h faster. Cases without adherence show that users anticipate a red light, rolling out earlier with 12.85\% more stops and a 3.39 km/h decrease in speed while saving 5.5\% in energy. A survey shows an average System Usability Scale of 73, with improvable reliability and coverage of speed advisories. Enhanced informedness, reduced stops, and increased comfort are seen by users as key benefits. We thoroughly analyze these findings and outline potential directions for future research.
\end{abstract}

\newpage

\tableofcontents

% \listoffigures
% \addcontentsline{toc}{chapter}{\listfigurename}

% \listoftables
% \addcontentsline{toc}{chapter}{\listtablename}

% this is where your thesis lives

% \nocite{jeschor2024cloudy}
\nocite{matthes2022matching}
\nocite{matthes2023geo}
\nocite{matthes2023accurate}
\nocite{matthes2022selecting}

\nocite{lorenz_2022}
\nocite{pickhardt_2022}
\nocite{jeschor_2022}
\nocite{lahr_2023}
\nocite{pickhardt_2023}
\nocite{wieland_2023}
\nocite{pix_2024}

\input{sections/introduction.tex}
\input{sections/prediction.tex}
\input{sections/matching.tex}
\input{sections/routing.tex}
\input{sections/app.tex}
\input{sections/conclusions.tex}

\nocite{*}

\newpage

\emergencystretch=10em

\chapter*{\bibname}
\addcontentsline{toc}{chapter}{\bibname}
\markright{Bibliography}

\section*{Published Research Papers}
This thesis is based on the following peer-reviewed research papers in which the author was the principal investigator:
\printbibliography[heading=none,nottype=student,keyword={ownpaper,related}]
The following study, although not directly pivotal for this work, had methodological relevance for hyperparameter tuning of the machine learning model in \Cref{ch:matching}, as well as GNSS-related aspects of smartphone sensor handling in \Cref{ch:routing} and \Cref{ch:app}:
\printbibliography[heading=none,notkeyword={student},keyword={ownpaper,notrelated}]
\pagebreak

\section*{Supervised Student Theses}
The author of this thesis identified several topics for student theses and was involved as supervisor:
\printbibliography[heading=none,keyword={student},notkeyword={ownpaper}]
\pagebreak

\section*{References}
\printbibliography[heading=none,notkeyword={student},notkeyword={ownpaper,notrelated},notkeyword={ownpaper,related}]
\pagebreak

\newpage
\addcontentsline{toc}{chapter}{Attribution}
\markright{Attribution}

\section*{Attribution}\setcurrentname{Unnumbered Section}\label{attribution}

Map tiles for figures in this work use map data from CARTO, CyclOSM, Mapbox, and OpenStreetMap and their data sources. To learn more, visit \url{https://carto.com/basemaps}, \url{https://www.cyclosm.org/}, \url{https://www.mapbox.com/about/maps/}, and \url{https://www.openstreetmap.org/copyright}.

Screenshots of the developed mobile application use Google Material Icons. These icons are available under \url{https://fonts.google.com/icons} and were licensed under Apache License, Version 2.0: \url{https://www.apache.org/licenses/LICENSE-2.0.txt}.

Traffic light and detector data was provided by the Free and Hanseatic City of Hamburg, Landesbetrieb für Straßen, Brücken und Gewässer (LSBG), Data License Germany Version 2.0: \url{https://www.govdata.de/dl-de/by-2-0} -- \url{https://metaver.de/trefferanzeige?docuuid=AB32CF78-389A-4579-9C5E-867EF31CA225}.

Digitales Radverkehrsnetz Hamburg (DRN) data was provided by the Free and Hanseatic City of Hamburg, Behörde für Verkehr und Mobilitätswende (BVM), Data License Germany Version 2.0: \url{https://www.govdata.de/dl-de/by-2-0}. Dataset URL: \url{https://metaver.de/trefferanzeige?docuuid=EA847D9F-6403-4B75-BCDB-73F831F960C7}

This work is funded by the Federal Ministry for Digital and Transport (BMDV, FKZ: 16DKVM001B).

\end{document}