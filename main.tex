\documentclass[
  ngerman,english, % change to ngerman for german theses
  BCOR=0mm,cdgeometry=no,DIV=13, % use two-side for booklike layouts
  numbers=noenddot, % remove trailing dots in chapter/section/... enumeration
  cd=fullcolor,
  headings=heavy,
  chapterpage=true,
  cdfont=off, % modify this to use the TUD font (Open Sans)
  egregdoesnotlikesansseriftitles
]{tudscrmanual}

% use a custom serif font
\usepackage[bitstream-charter]{mathdesign}

\usepackage[hyphens]{url}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[
  english % change to ngerman for german theses
]{babel}
\usepackage{isodate}
\usepackage{pdfpages}
\usepackage{listings}
\usepackage[toc, page]{appendix}
\usepackage{hyphenat}

\usepackage[
  style=ieee,
  backend=biber,
  url=false,
  doi=false,
  isbn=false,
  hyperref,
]{biblatex}
% configure the location of the biblatex file
\addbibresource{students.bib}
\addbibresource{papers.bib}
\addbibresource{bibliography.bib}
\AtEveryBibitem{%
  \clearfield{note}%
}

\usepackage{graphicx}
\graphicspath{ {./} }
\usepackage{svg}

\usepackage{caption}
\captionsetup{font={footnotesize},labelsep=colon,justification=centering,format=plain}
\usepackage{floatrow}
\floatsetup{font=normalfont}
\floatsetup[table]{style=plaintop}
\DeclareCaptionSubType[alph]{figure}
\DeclareCaptionSubType[alph]{table}

\usepackage{booktabs}
\usepackage{longtable}

\usepackage{enumitem}
\setlist[itemize]{noitemsep}
\setlist{parsep=0pt,listparindent=\parindent}

\usepackage{float}
\usepackage{pgf}

% configure the name of your appendix
\renewcommand\appendixtocname{Appendix}
\renewcommand\appendixpagename{Appendix}

% use \tocless before a chapter/section/... in the
% appendix to hide it from the toc
\newcommand{\nocontentsline}[3]{}
\newcommand{\tocless}[2]{
  \bgroup\let\addcontentsline=\nocontentsline#1{#2}\egroup
}

\usepackage{amsmath}

% https://github.com/priobike/priobike-flutter-app/blob/dev/lib/common/layout/ci.dart
\definecolor{ciblue}{HTML}{0073ff}
\definecolor{cidarkblue}{HTML}{003064}
\usepackage[colorlinks=true,allcolors=ciblue]{hyperref}%
\usepackage[capitalise,nameinlink,noabbrev]{cleveref} % Must be loaded after amsmath
\hypersetup{
  colorlinks=true,
  linkcolor=black,
  filecolor=ciblue,
  citecolor=ciblue,      
  urlcolor=ciblue,
}

\usepackage{listings}
\definecolor{background}{HTML}{F6F6FE}
\usepackage[scaled=0.85]{beramono}
\lstdefinelanguage{python}{
    basicstyle=\ttfamily\footnotesize,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{cidarkblue}0}}}{1}
      {1}{{{\color{cidarkblue}1}}}{1}
      {2}{{{\color{cidarkblue}2}}}{1}
      {3}{{{\color{cidarkblue}3}}}{1}
      {4}{{{\color{cidarkblue}4}}}{1}
      {5}{{{\color{cidarkblue}5}}}{1}
      {6}{{{\color{cidarkblue}6}}}{1}
      {7}{{{\color{cidarkblue}7}}}{1}
      {8}{{{\color{cidarkblue}8}}}{1}
      {9}{{{\color{cidarkblue}9}}}{1}
      {:}{{{\color{cidarkblue}{:}}}}{1}
      {,}{{{\color{cidarkblue}{,}}}}{1}
      {\{}{{{\color{cidarkblue}{\{}}}}{1}
      {\}}{{{\color{cidarkblue}{\}}}}}{1}
      {[}{{{\color{cidarkblue}{[}}}}{1}
      {]}{{{\color{cidarkblue}{]}}}}{1},
}

\usepackage[framemethod=tikz]{mdframed}
\newcounter{Summary}[section]
\newenvironment{Summary}[1][]{%
\stepcounter{Summary}%
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east)]
% Theorem
\node[anchor=east,rectangle,fill=ciblue]
{\strut};}}
}%
{\mdfsetup{%
frametitle={%
{\strut \color{cidarkblue}\textrm{#1}}}}%
}%
\mdfsetup{innertopmargin=0pt,innerbottommargin=0pt,innerrightmargin=16pt,innerleftmargin=0pt,linecolor=cidarkblue,linewidth=2pt,topline=false,bottomline=false,leftline=false,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

% use this custom theorem for research questions
\newtheorem{researchquestion}{Research Question}
\crefname{researchquestion}{Research Question}{Research Questions}

\renewcommand{\floatpagefraction}{.8}% Avoid pages that only contain one image, but no text
\usepackage[all]{nowidow}% Avoid orphaned lines on new pages

\setlength{\parindent}{0cm}
\setlength{\parskip}{0.3cm plus 1mm minus 1mm}
\setlength{\intextsep}{0.6cm}

\begin{document}
\addtokomafont{disposition}{\rmfamily}
\addtokomafont{title}{\rmfamily}
\addtokomafont{titlepage}{\rmfamily}
\addtokomafont{thesis}{\rmfamily}
\addtokomafont{tudheadings}{\rmfamily}
\addtokomafont{partsubtitle}{\rmfamily}
\addtokomafont{chaptersubtitle}{\rmfamily}
\addtokomafont{author}{\rmfamily}
\addtokomafont{caption}{\rmfamily}
\addtokomafont{captionlabel}{\rmfamily}
\addtokomafont{chapter}{\rmfamily}
\addtokomafont{chapterentry}{\rmfamily}
\addtokomafont{chapterentrydots}{\rmfamily}
\addtokomafont{chapterentrypagenumber}{\rmfamily}
\addtokomafont{chapterprefix}{\rmfamily}
\addtokomafont{date}{\rmfamily}
\addtokomafont{dedication}{\rmfamily}
\addtokomafont{descriptionlabel}{\rmfamily}
\addtokomafont{dictum}{\rmfamily}
\addtokomafont{dictumtext}{\rmfamily}
\addtokomafont{footnote}{\rmfamily}
\addtokomafont{footnotelabel}{\rmfamily}
\addtokomafont{footnotereference}{\rmfamily}
\addtokomafont{footnoterule}{\rmfamily}
\addtokomafont{labelinglabel}{\rmfamily}
\addtokomafont{labelingseparator}{\rmfamily}
\addtokomafont{minisec}{\rmfamily}
\addtokomafont{pagefoot}{\rmfamily}
\addtokomafont{pagehead}{\rmfamily}
\addtokomafont{pageheadfoot}{\rmfamily}
\addtokomafont{pagenumber}{\rmfamily}
\addtokomafont{pagination}{\rmfamily}
\addtokomafont{paragraph}{\rmfamily}
\addtokomafont{part}{\rmfamily}
\addtokomafont{partentry}{\rmfamily}
\addtokomafont{partentrypagenumber}{\rmfamily}
\addtokomafont{partnumber}{\rmfamily}
\addtokomafont{publishers}{\rmfamily}
\addtokomafont{section}{\rmfamily}
\addtokomafont{sectioning}{\rmfamily}
\addtokomafont{subject}{\rmfamily}
\addtokomafont{subparagraph}{\rmfamily}
\addtokomafont{subsection}{\rmfamily}
\addtokomafont{subsubsection}{\rmfamily}
\addtokomafont{subtitle}{\rmfamily}
\addtokomafont{title}{\rmfamily}
\addtokomafont{titlehead}{\rmfamily}

  \faculty{Faculty of Computer Science}
  \department{}
  \institute{Institute of Systems Architecture}
  \chair{Chair of Distributed and Networked Systems}
  \title{Green Light Optimal Speed Advisory for Bikes}

  \thesis{phd} % the type of thesis you want to write
  \graduation[Dr.-Ing.]{Doktoringenieur}

  \author{Philipp Matthes}
  \dateofbirth{12.3.1997}
  \placeofbirth{Chemnitz}

  \referee{Prof. Dr. Christoph Sommer \and TBA}
  \advisor{Dr. Thomas Springer}
  \date{} % the date of submission
  \maketitle
  
  \TUDoption{abstract}{section,multiple}
  \renewcommand\abstractname{Preliminary Abstract}
  \begin{abstract}
Promoting cycling is a crucial solution to improve the livability of urban environments. A non-invasive way to promote cycling is by enhancing the overall ride experience via Green Light Optimal Speed Advisory for bikes (bike-GLOSA). Through traffic light predictions displayed in a smartphone app, users are given the chance to adapt their ride speed to catch as many green lights as possible. The potential of bike-GLOSA to improve rides has been underlined by previous studies in simulation and controlled test-track environments. However, significant research challenges must be addressed to make bike-GLOSA practical in real-world urban environments and evaluate its impact on cyclists. This work addresses these challenges, establishing and testing a bike-GLOSA system in Hamburg. 

On the scale of a city, the first major challenge involves predicting the switching behavior of thousands of traffic lights. Raising concerns about the compatibility of decentralized approaches with cyclist applications, a bike-ready solution is presented that utilizes real-time traffic light data from an open urban data platform. Contributing to the understanding of real-world challenges, we find that data outages require robust prediction, thorough monitoring, and quality assurance to operate a bike-GLOSA system on a centralized data infrastructure. Affected by data outages, the deployed probabilistic prediction algorithm achieves a mean availability of 53\% with a prediction quality of 87\%. In contrast to previous research, we observe that a substantial prevalence of 91\% adaptive traffic lights in Hamburg does not serve as an effective indicator of predictability. We propose two direct indicators of predictability that measure the switching behavior's instability. Using 424 million recorded switching cycles for 18,528 individual traffic lights over four weeks, we find no substantial difference between transport modes and that low predictability is bound to few intersections. Our results suggest that traffic-adaptive switching behavior is less problematic for prediction than previously envisioned, as most intersections can be sufficiently predicted.

Afterward, we tackle the challenge of identifying traffic lights cycled toward. A literature study finds that existing camera-based approaches are impractical for cyclists, and location-based approaches face significant issues with mismatching due to geolocation inaccuracies. A novel route-based approach is proposed that selects the best traffic lights, comparing their turn geometries with the bike route's shape. However, establishing such an approach proves challenging in many situations where the OpenStreetMap bike route does not accurately capture the actual cycling infrastructure. Out of 1,035 considered traversals of traffic lights, only 23\% are determined error-free, with 72\% of error cases resulting from routing in the center of the road instead of the appropriate bike path. Thus, spatial reasoning is found to be required to determine the best sequence of traffic lights that will be passed by the cyclist at an intersection. Several approaches are developed and tested, culminating in a machine learning model that achieves matching F1 scores of 92\% and 86\% validated on a separate dataset. Our method is measured to require a median extra time of 1.4 seconds during bike route (re-)calculation. Thus, a practical traffic light matching solution for bike-GLOSA applications could be achieved while there is still room for improvement.

Building on these results, we focus on reducing the overall number of bike routing errors and enhancing route alignment with actual bike paths. One emerging approach identified in related work is the usage of authoritative datasets to enhance the path network's correctness and completeness. Our concept involves replacing the entire area of Hamburg in OpenStreetMap with such an authoritative dataset, stitching the dataset at its boundary for cross-border routing. As a result, the surface information coverage increased from 66.4\% in OpenStreetMap to 99.9\% with our approach. A comparison with hand-drawn bike lanes over satellite images indicates a substantially improved alignment with actual cycling infrastructure compared to OpenStreetMap, Google Maps, and Bing Maps routes. The generated bike routes also align closer with traffic light positions and user trajectories. In consequence, the traffic light matching F1 score is further improved by 4.74\% to 90.94\% during validation. Routing errors decrease from 77\% of samples to 40\%. Bike routes are similarly long while providing a more detailed geometry, suggesting they capture road bends or turn shapes more accurately. The improvement in alignment and shape not only benefits traffic light matching but also distance-to-signal estimation. Measurements show that a route-based estimation is more stable with increased distance from the traffic light compared to the over-the-air distance, as utilized in multiple related works. Our results advocate strongly in many ways for a route-based bike-GLOSA approach, contrary to previous works which have not seen routing as an integral component.

The developed solutions are combined in a mobile app that provides GLOSA to Hamburg's cyclists. Related work indicates a wide range of possible user interface designs and levels of sophistication. The recent challenge of providing a context-aware speed advisory to cyclists is addressed through a speedometer user interface, allowing users to choose suitable speeds themselves. The speed advisory is integrated with a set of wayfinding functionalities that encompass the pathway's surface information and prediction availability for an enhanced bike routing decision. User questionnaires indicate an average System Usability Score of 73. Considering demographics within the group of testers and feedback, general dissatisfaction with data outages can be determined as one of the key areas of improvement. 

The impacts of the speed advisory on cyclists are studied based on 1,962 intersection approaches extracted from 1,655 rides over the course of one year. Assuming that not all speed advisories may provide a useful green phase reachable by the cyclist, two cases are studied independently: cases with high adherence and cases with low adherence to the speed advisory. In cases with high adherence, the stop rate is reduced from 25\% without GLOSA to 15\% with GLOSA, elevating the median traffic light passing speed from 15.5 km/h to 18.4 km/h. Low adherence results in a stop rate of 32\% and 12 km/h passing speed, while often resulting from no green phase being reached, leading to earlier deceleration and 10\% estimated energy savings. These results are cross-checked with human categorization of 915 individual approaches, confirming a twofold effect of bike-GLOSA on cycling: accelerating rides and reducing stops whenever a speed advisory is followed and helping users save energy when no green phase can be caught. We critically review the developed solution and measured results to draw conclusions and potential avenues for future work.
  \end{abstract}

  \newpage
  % \confirmation

  \tableofcontents

  % \listoffigures
  % \addcontentsline{toc}{chapter}{\listfigurename}

  % \listoftables
  % \addcontentsline{toc}{chapter}{\listtablename}

  % this is where your thesis lives

  % \nocite{jeschor2024cloudy}
  \nocite{matthes2022matching}
  \nocite{matthes2023geo}
  \nocite{matthes2023accurate}
  \nocite{matthes2022selecting}

  \input{sections/introduction.tex}
  \input{sections/prediction.tex}
  \input{sections/matching.tex}
  \input{sections/routing.tex}
  \input{sections/app.tex}
  \input{sections/conclusions.tex}

   \nocite{*}

  \newpage

  \emergencystretch=2em

  \chapter*{\bibname}
  \addcontentsline{toc}{chapter}{\bibname}
  \addcontentsline{toc}{subsection}{Published Research Papers}
  \section*{Published Research Papers}
  This thesis is based on the following peer-reviewed research papers in which the author was the principal investigator:
  \printbibliography[heading=none,nottype=student,keyword={ownpaper,related}]
  \printbibliography[heading=none,nottype=student,keyword={ownpaper,notrelated}]
  \pagebreak

  \addcontentsline{toc}{subsection}{Supervised Student Theses}
  \section*{Supervised Student Theses}
  The author of this thesis identified several topics for student theses and was involved as supervisor:
  \printbibliography[heading=none,type=student,notkeyword={ownpaper}]
  \pagebreak

  \addcontentsline{toc}{subsection}{References}
  \section*{References}
  \printbibliography[heading=none,nottype=student,notkeyword={ownpaper,notrelated},notkeyword={ownpaper,related}]
  \pagebreak
  
  % \begin{appendices}
  %   \input{sections/appendix.tex}
  % \end{appendices}

\end{document}