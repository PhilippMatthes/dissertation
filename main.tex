\documentclass[
  ngerman,english, % change to ngerman for german theses
  BCOR=0mm,cdgeometry=no, % use two-side for booklike layouts
  numbers=noenddot, % remove trailing dots in chapter/section/... enumeration
  cd=fullcolor,
  headings=heavy,
  chapterpage=true,
  cdfont=off, % modify this to use the TUD font (Open Sans)
  egregdoesnotlikesansseriftitles,
]{tudscrmanual}

% use a custom serif font
\usepackage[bitstream-charter]{mathdesign}

\newcommand{\mathdefault}[1][]{}

\usepackage[hyphens]{url}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[
  english % change to ngerman for german theses
]{babel}
\usepackage{isodate}
\usepackage{pdfpages}
\usepackage{listings}
\usepackage[toc, page]{appendix}
\usepackage{hyphenat}

\usepackage[
  style=ieee,
  backend=biber,
  url=false,
  doi=false,
  isbn=false,
  hyperref,
]{biblatex}
% configure the location of the biblatex file
\addbibresource{students.bib}
\addbibresource{papers.bib}
\addbibresource{bibliography.bib}
\AtEveryBibitem{%
  \clearfield{note}%
}

\usepackage{graphicx}
\graphicspath{ {./} }
\usepackage{svg}

\usepackage{caption}
\captionsetup{font={footnotesize},labelsep=colon,justification=centering,format=plain}
\usepackage{floatrow}
\floatsetup{font=normalfont}
\floatsetup[table]{style=plaintop}
\DeclareCaptionSubType[alph]{figure}
\DeclareCaptionSubType[alph]{table}

\usepackage{booktabs}
\usepackage{longtable}

\usepackage{enumitem}
\setlist[itemize]{noitemsep}
\setlist{parsep=0pt,listparindent=\parindent}

\usepackage{float}
\usepackage{pgf}

% configure the name of your appendix
\renewcommand\appendixtocname{Appendix}
\renewcommand\appendixpagename{Appendix}

% use \tocless before a chapter/section/... in the
% appendix to hide it from the toc
\newcommand{\nocontentsline}[3]{}
\newcommand{\tocless}[2]{
  \bgroup\let\addcontentsline=\nocontentsline#1{#2}\egroup
}

\usepackage{amsmath}

% https://github.com/priobike/priobike-flutter-app/blob/dev/lib/common/layout/ci.dart
\definecolor{ciblue}{HTML}{0073ff}
\definecolor{cidarkblue}{HTML}{003064}
\usepackage[colorlinks=true,allcolors=ciblue]{hyperref}%
\usepackage[capitalise,nameinlink,noabbrev]{cleveref} % Must be loaded after amsmath
\hypersetup{
  colorlinks=true,
  linkcolor=black,
  filecolor=ciblue,
  citecolor=ciblue,      
  urlcolor=ciblue,
}

\usepackage{listings}
\definecolor{background}{HTML}{F6F6FE}
\usepackage[scaled=0.85]{beramono}
\lstdefinelanguage{python}{
    basicstyle=\ttfamily\footnotesize,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{cidarkblue}0}}}{1}
      {1}{{{\color{cidarkblue}1}}}{1}
      {2}{{{\color{cidarkblue}2}}}{1}
      {3}{{{\color{cidarkblue}3}}}{1}
      {4}{{{\color{cidarkblue}4}}}{1}
      {5}{{{\color{cidarkblue}5}}}{1}
      {6}{{{\color{cidarkblue}6}}}{1}
      {7}{{{\color{cidarkblue}7}}}{1}
      {8}{{{\color{cidarkblue}8}}}{1}
      {9}{{{\color{cidarkblue}9}}}{1}
      {:}{{{\color{cidarkblue}{:}}}}{1}
      {,}{{{\color{cidarkblue}{,}}}}{1}
      {\{}{{{\color{cidarkblue}{\{}}}}{1}
      {\}}{{{\color{cidarkblue}{\}}}}}{1}
      {[}{{{\color{cidarkblue}{[}}}}{1}
      {]}{{{\color{cidarkblue}{]}}}}{1},
}

\usepackage[framemethod=tikz]{mdframed}
\newcounter{Summary}[section]
\newenvironment{Summary}[1][]{%
\stepcounter{Summary}%
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east)]
% Theorem
\node[anchor=east,rectangle,fill=ciblue]
{\strut};}}
}%
{\mdfsetup{%
frametitle={%
{\strut \color{cidarkblue}\textrm{#1}}}}%
}%
\mdfsetup{innertopmargin=0pt,innerbottommargin=0pt,innerrightmargin=16pt,innerleftmargin=0pt,linecolor=cidarkblue,linewidth=2pt,topline=false,bottomline=false,leftline=false,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

% use this custom theorem for research questions
\newtheorem{researchquestion}{Research Question}
\crefname{researchquestion}{Research Question}{Research Questions}

\renewcommand{\floatpagefraction}{.8}% Avoid pages that only contain one image, but no text
\usepackage[all]{nowidow}% Avoid orphaned lines on new pages

\setlength{\parindent}{0cm}
\setlength{\parskip}{0.3cm plus 1mm minus 1mm}
\setlength{\intextsep}{0.6cm}

\begin{document}
\addtokomafont{disposition}{\rmfamily}
\addtokomafont{title}{\rmfamily}
\addtokomafont{titlepage}{\rmfamily}
\addtokomafont{thesis}{\rmfamily}
\addtokomafont{tudheadings}{\rmfamily}
\addtokomafont{partsubtitle}{\rmfamily}
\addtokomafont{chaptersubtitle}{\rmfamily}
\addtokomafont{author}{\rmfamily}
\addtokomafont{caption}{\rmfamily}
\addtokomafont{captionlabel}{\rmfamily}
\addtokomafont{chapter}{\rmfamily}
\addtokomafont{chapterentry}{\rmfamily}
\addtokomafont{chapterentrydots}{\rmfamily}
\addtokomafont{chapterentrypagenumber}{\rmfamily}
\addtokomafont{chapterprefix}{\rmfamily}
\addtokomafont{date}{\rmfamily}
\addtokomafont{dedication}{\rmfamily}
\addtokomafont{descriptionlabel}{\rmfamily}
\addtokomafont{dictum}{\rmfamily}
\addtokomafont{dictumtext}{\rmfamily}
\addtokomafont{footnote}{\rmfamily}
\addtokomafont{footnotelabel}{\rmfamily}
\addtokomafont{footnotereference}{\rmfamily}
\addtokomafont{footnoterule}{\rmfamily}
\addtokomafont{labelinglabel}{\rmfamily}
\addtokomafont{labelingseparator}{\rmfamily}
\addtokomafont{minisec}{\rmfamily}
\addtokomafont{pagefoot}{\rmfamily}
\addtokomafont{pagehead}{\rmfamily}
\addtokomafont{pageheadfoot}{\rmfamily}
\addtokomafont{pagenumber}{\rmfamily}
\addtokomafont{pagination}{\rmfamily}
\addtokomafont{paragraph}{\rmfamily}
\addtokomafont{part}{\rmfamily}
\addtokomafont{partentry}{\rmfamily}
\addtokomafont{partentrypagenumber}{\rmfamily}
\addtokomafont{partnumber}{\rmfamily}
\addtokomafont{publishers}{\rmfamily}
\addtokomafont{section}{\rmfamily}
\addtokomafont{sectioning}{\rmfamily}
\addtokomafont{subject}{\rmfamily}
\addtokomafont{subparagraph}{\rmfamily}
\addtokomafont{subsection}{\rmfamily}
\addtokomafont{subsubsection}{\rmfamily}
\addtokomafont{subtitle}{\rmfamily}
\addtokomafont{title}{\rmfamily}
\addtokomafont{titlehead}{\rmfamily}

  \faculty{Faculty of Computer Science}
  \department{}
  \institute{Institute of Systems Architecture}
  \chair{Chair of Distributed and Networked Systems}
  \title{Green Light Optimal Speed Advisory for Bikes}

  \thesis{phd} % the type of thesis you want to write
  \graduation[Dr.-Ing.]{Doktoringenieur}

  \author{Dipl.-Inf. Philipp Matthes}
  \dateofbirth{12.3.1997}
  \placeofbirth{Chemnitz}

  \referee{Prof. Dr.-Ing. Christoph Sommer \and Prof. Dr.-Ing. habil. Monika Sester}
  \advisor{Dr.-Ing. Thomas Springer}
  \date{} % the date of submission
  \maketitle
  
  \TUDoption{abstract}{section,multiple}
  \renewcommand\abstractname{Preliminary Abstract}
  \begin{abstract}
Promoting cycling is a crucial solution to improve the livability of urban environments. A non-invasive way to promote cycling is to enhance the bike ride experience via Green Light Optimal Speed Advisory (bike-GLOSA). This work presents such a system for Hamburg, making bike-GLOSA practical in real-world urban environments and evaluating its impact on cyclists. 

The first challenge to overcome is predicting the switching behavior of thousands of traffic lights and making this information available to cyclists. We establish a data infrastructure that ingests real-time data from multiple thousand traffic lights throughout the city. Through a long-term study, we find that data outages require robust prediction, thorough monitoring, and quality assurance to operate a bike-GLOSA system on a centralized data infrastructure. Affected by data outages, the deployed probabilistic prediction algorithm achieves a mean availability of 53\% with a prediction quality of 87\%. We collect the real-time data of 18,009 traffic lights over a longer period to investigate traffic light predictability in unprecedented detail.

Afterward, we develop a novel method to match traffic lights along the user's trajectory. Instead of using the user's location or camera, our method automatically matches traffic lights along a precalculated bike route geometry. However, erroneous OpenStreetMap bike routes challenge this approach, requiring an advanced model that employs spatial reasoning to find which associated traffic light turn geometries match the given route geometry. The final model achieves matching F1 scores of 92\% and 86\% validated on a separate dataset, requiring a median extra time of 1.4 seconds during bike route (re-)calculation. 

Building on these results, we focus on reducing the overall number of bike routing errors and enhancing route alignment with actual bike paths. Our solution involves the integration of an authoritative bike routing dataset, stitching the dataset at its boundary with OpenStreetMap for cross-border routing. Results include an increased surface information coverage from 66.4\% in OpenStreetMap to 99.9\% with our approach, and a substantially improved alignment with actual cycling infrastructure, traffic lights, and user trajectories. In consequence, the traffic light matching F1 score is further improved by 4.74\% to 90.94\% during validation. Routing errors decrease from 77\% of samples to 40\%. Based on the developed routing, a route-based distance-to-signal estimation approach is proposed, showing more stable distance estimation compared to the over-the-air distance, as utilized in multiple related works.

Combining in-app bike routing with a speedometer visualization of the traffic light prediction, a mobile app is developed that provides city-wide access to the bike-GLOSA system. By inviting users and studying their app usage over the course of 2023, we find that 

A recent challenge of providing a context-aware speed advisory to cyclists is addressed through a speedometer user interface, allowing users to choose suitable speeds themselves. The speed advisory is integrated with a set of wayfinding functionalities that encompass the pathway's surface information and prediction availability for an enhanced bike routing decision. User questionnaires indicate an average System Usability Scale of 73. Considering demographics within the group of testers and feedback, general dissatisfaction with data outages can be determined as one of the key areas of improvement. 

The impacts of the speed advisory on cyclists are studied based on 1,962 intersection approaches extracted from 1,655 rides over the course of one year. Assuming that not all speed advisories may provide a useful green phase reachable by the cyclist, two cases are studied independently: cases with high adherence and cases with low adherence to the speed advisory. In cases with high adherence, the stop rate is reduced from 25\% without GLOSA to 15\% with GLOSA, elevating the median traffic light passing speed from 15.5 km/h to 18.4 km/h. Low adherence results in a stop rate of 32\% and 12 km/h passing speed, while often resulting from no green phase being reached, leading to earlier deceleration and 10\% estimated energy savings. These results are cross-checked with human categorization of 915 individual approaches, confirming a twofold effect of bike-GLOSA on cycling: accelerating rides and reducing stops whenever a speed advisory is followed and helping users save energy when no green phase can be caught. We critically review the developed solution and measured results to draw conclusions and potential avenues for future work.
  \end{abstract}

  \newpage
  % \confirmation

  \tableofcontents

  % \listoffigures
  % \addcontentsline{toc}{chapter}{\listfigurename}

  % \listoftables
  % \addcontentsline{toc}{chapter}{\listtablename}

  % this is where your thesis lives

  % \nocite{jeschor2024cloudy}
  \nocite{matthes2022matching}
  \nocite{matthes2023geo}
  \nocite{matthes2023accurate}
  \nocite{matthes2022selecting}

  \input{sections/introduction.tex}
  \input{sections/prediction.tex}
  \input{sections/matching.tex}
  \input{sections/routing.tex}
  \input{sections/app.tex}
  \input{sections/conclusions.tex}

   \nocite{*}

  \newpage

  \emergencystretch=2em

  \chapter*{\bibname}
  \addcontentsline{toc}{chapter}{\bibname}
  \section*{Published Research Papers}
  This thesis is based on the following peer-reviewed research papers in which the author was the principal investigator:
  \printbibliography[heading=none,nottype=student,keyword={ownpaper,related}]
  \printbibliography[heading=none,nottype=student,keyword={ownpaper,notrelated}]
  \pagebreak

  \section*{Supervised Student Theses}
  The author of this thesis identified several topics for student theses and was involved as supervisor:
  \printbibliography[heading=none,type=student,notkeyword={ownpaper}]
  \pagebreak

  \section*{References}
  \printbibliography[heading=none,nottype=student,notkeyword={ownpaper,notrelated},notkeyword={ownpaper,related}]
  \pagebreak
  
  % \begin{appendices}
  %   \input{sections/appendix.tex}
  % \end{appendices}

\end{document}