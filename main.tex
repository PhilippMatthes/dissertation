\documentclass[
  ngerman,english, % change to ngerman for german theses
  BCOR=0mm,cdgeometry=no,DIV=13, % use two-side for booklike layouts
  numbers=noenddot, % remove trailing dots in chapter/section/... enumeration
  cd=fullcolor,
  headings=heavy,
  chapterpage=true,
  cdfont=off, % modify this to use the TUD font (Open Sans)
  egregdoesnotlikesansseriftitles
]{tudscrmanual}

% use a custom serif font
\usepackage[bitstream-charter]{mathdesign}

\usepackage[hyphens]{url}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[
  english % change to ngerman for german theses
]{babel}
\usepackage{isodate}
\usepackage{pdfpages}
\usepackage{listings}
\usepackage[toc, page]{appendix}
\usepackage{hyphenat}

\usepackage[
  style=ieee,
  backend=biber,
  url=false,
  doi=false,
  isbn=false,
  hyperref,
]{biblatex}
% configure the location of the biblatex file
\addbibresource{students.bib}
\addbibresource{papers.bib}
\addbibresource{bibliography.bib}
\AtEveryBibitem{%
  \clearfield{note}%
}

\usepackage{graphicx}
\graphicspath{ {./} }
\usepackage{svg}

\usepackage{caption}
\captionsetup{font={footnotesize},labelsep=colon,justification=centering,format=plain}
\usepackage{floatrow}
\floatsetup{font=normalfont}
\floatsetup[table]{style=plaintop}
\DeclareCaptionSubType[alph]{figure}
\DeclareCaptionSubType[alph]{table}

\usepackage{booktabs}
\usepackage{longtable}

\usepackage{enumitem}
\setlist[itemize]{noitemsep}
\setlist{parsep=0pt,listparindent=\parindent}

\usepackage{float}
\usepackage{pgf}

% configure the name of your appendix
\renewcommand\appendixtocname{Appendix}
\renewcommand\appendixpagename{Appendix}

% use \tocless before a chapter/section/... in the
% appendix to hide it from the toc
\newcommand{\nocontentsline}[3]{}
\newcommand{\tocless}[2]{
  \bgroup\let\addcontentsline=\nocontentsline#1{#2}\egroup
}

\usepackage{amsmath}

% https://github.com/priobike/priobike-flutter-app/blob/dev/lib/common/layout/ci.dart
\definecolor{ciblue}{HTML}{0073ff}
\definecolor{cidarkblue}{HTML}{003064}
\usepackage[colorlinks=true,allcolors=ciblue]{hyperref}%
\usepackage[capitalise,nameinlink,noabbrev]{cleveref} % Must be loaded after amsmath
\hypersetup{
  colorlinks=true,
  linkcolor=black,
  filecolor=ciblue,
  citecolor=ciblue,      
  urlcolor=ciblue,
}

\usepackage{listings}
\definecolor{background}{HTML}{F6F6FE}
\usepackage[scaled=0.85]{beramono}
\lstdefinelanguage{python}{
    basicstyle=\ttfamily\footnotesize,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{cidarkblue}0}}}{1}
      {1}{{{\color{cidarkblue}1}}}{1}
      {2}{{{\color{cidarkblue}2}}}{1}
      {3}{{{\color{cidarkblue}3}}}{1}
      {4}{{{\color{cidarkblue}4}}}{1}
      {5}{{{\color{cidarkblue}5}}}{1}
      {6}{{{\color{cidarkblue}6}}}{1}
      {7}{{{\color{cidarkblue}7}}}{1}
      {8}{{{\color{cidarkblue}8}}}{1}
      {9}{{{\color{cidarkblue}9}}}{1}
      {:}{{{\color{cidarkblue}{:}}}}{1}
      {,}{{{\color{cidarkblue}{,}}}}{1}
      {\{}{{{\color{cidarkblue}{\{}}}}{1}
      {\}}{{{\color{cidarkblue}{\}}}}}{1}
      {[}{{{\color{cidarkblue}{[}}}}{1}
      {]}{{{\color{cidarkblue}{]}}}}{1},
}

\usepackage[framemethod=tikz]{mdframed}
\newcounter{Summary}[section]
\newenvironment{Summary}[1][]{%
\stepcounter{Summary}%
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east)]
% Theorem
\node[anchor=east,rectangle,fill=ciblue]
{\strut};}}
}%
{\mdfsetup{%
frametitle={%
{\strut \color{cidarkblue}\textrm{#1}}}}%
}%
\mdfsetup{innertopmargin=0pt,innerbottommargin=0pt,innerrightmargin=16pt,innerleftmargin=0pt,linecolor=cidarkblue,linewidth=2pt,topline=false,bottomline=false,leftline=false,}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

% use this custom theorem for research questions
\newtheorem{researchquestion}{Research Question}
\crefname{researchquestion}{Research Question}{Research Questions}

\renewcommand{\floatpagefraction}{.8}% Avoid pages that only contain one image, but no text
\usepackage[all]{nowidow}% Avoid orphaned lines on new pages

\setlength{\parindent}{0cm}
\setlength{\parskip}{0.3cm plus 1mm minus 1mm}
\setlength{\intextsep}{0.6cm}

\begin{document}
\addtokomafont{disposition}{\rmfamily}
\addtokomafont{title}{\rmfamily}
\addtokomafont{titlepage}{\rmfamily}
\addtokomafont{thesis}{\rmfamily}
\addtokomafont{tudheadings}{\rmfamily}
\addtokomafont{partsubtitle}{\rmfamily}
\addtokomafont{chaptersubtitle}{\rmfamily}
\addtokomafont{author}{\rmfamily}
\addtokomafont{caption}{\rmfamily}
\addtokomafont{captionlabel}{\rmfamily}
\addtokomafont{chapter}{\rmfamily}
\addtokomafont{chapterentry}{\rmfamily}
\addtokomafont{chapterentrydots}{\rmfamily}
\addtokomafont{chapterentrypagenumber}{\rmfamily}
\addtokomafont{chapterprefix}{\rmfamily}
\addtokomafont{date}{\rmfamily}
\addtokomafont{dedication}{\rmfamily}
\addtokomafont{descriptionlabel}{\rmfamily}
\addtokomafont{dictum}{\rmfamily}
\addtokomafont{dictumtext}{\rmfamily}
\addtokomafont{footnote}{\rmfamily}
\addtokomafont{footnotelabel}{\rmfamily}
\addtokomafont{footnotereference}{\rmfamily}
\addtokomafont{footnoterule}{\rmfamily}
\addtokomafont{labelinglabel}{\rmfamily}
\addtokomafont{labelingseparator}{\rmfamily}
\addtokomafont{minisec}{\rmfamily}
\addtokomafont{pagefoot}{\rmfamily}
\addtokomafont{pagehead}{\rmfamily}
\addtokomafont{pageheadfoot}{\rmfamily}
\addtokomafont{pagenumber}{\rmfamily}
\addtokomafont{pagination}{\rmfamily}
\addtokomafont{paragraph}{\rmfamily}
\addtokomafont{part}{\rmfamily}
\addtokomafont{partentry}{\rmfamily}
\addtokomafont{partentrypagenumber}{\rmfamily}
\addtokomafont{partnumber}{\rmfamily}
\addtokomafont{publishers}{\rmfamily}
\addtokomafont{section}{\rmfamily}
\addtokomafont{sectioning}{\rmfamily}
\addtokomafont{subject}{\rmfamily}
\addtokomafont{subparagraph}{\rmfamily}
\addtokomafont{subsection}{\rmfamily}
\addtokomafont{subsubsection}{\rmfamily}
\addtokomafont{subtitle}{\rmfamily}
\addtokomafont{title}{\rmfamily}
\addtokomafont{titlehead}{\rmfamily}

  \faculty{Faculty of Computer Science}
  \department{}
  \institute{Institute of Systems Architecture}
  \chair{Chair of Distributed and Networked Systems}
  \title{Green Light Optimal Speed Advisory for Bikes}

  \thesis{phd} % the type of thesis you want to write
  \graduation[Dr.-Ing.]{Doktoringenieur}

  \author{Philipp Matthes}
  \dateofbirth{12.3.1997}
  \placeofbirth{Chemnitz}

  \referee{Prof. Dr. Christoph Sommer \and TBA}
  \advisor{Dr. Thomas Springer}
  \date{} % the date of submission
  \maketitle
  
  \TUDoption{abstract}{section,multiple}
  \begin{abstract}
Promoting cycling is a crucial solution to improve the livability of urban environments. A non-invasive way to promote cycling is by enhancing the overall ride experience via Green Light Optimal Speed Advisory for bikes (bike-GLOSA). Through traffic light predictions displayed in a smartphone app, users are given the chance to adapt their ride speed to catch as many green lights as possible. The potential of bike-GLOSA to improve rides has been underlined by previous studies in simulation and controlled test-track environments. However, significant challenges must be addressed to make bike-GLOSA practical in real-world urban environments and evaluate its impact on cyclists. This work addresses these challenges, establishing and testing a bike-GLOSA system in Hamburg. 

On the scale of a city, the first major challenge involves predicting the switching behavior of thousands of traffic lights. Among a thorough study of recent developments in transmitting traffic light information to vehicles, this work presents a bike-ready approach using real-time traffic light data collected from an open urban data platform. Fostering the understanding of real-world challenges, we find that a stable data flow cannot be taken for granted in centralized GLOSA applications, requiring thorough quality assurance on the consumer side. A conceived monitoring solution surfaced and helped fix multiple systematic issues in Hamburg's traffic light data pipeline. An existing probabilistic prediction method intended to be robust against data errors is integrated and tested, resulting in a mean prediction quality of 87\% and availability of 53\%. Using two developed predictability metrics and 424 million recorded switching cycles for 18,528 individual traffic lights over four weeks, we find a low median instability of 0 to 3 seconds depending on daytime and no substantial difference in traffic adaptivity between transport modes. Thus, although at least 90.7\% of traffic lights in Hamburg are capable of traffic adaptivity, highly unpredictable switching behaviors are only seen at a few intersections. These results indicate that traffic-adaptive switching behavior is less problematic for traffic light prediction than expected in previous works that have not measured predictability directly.

Afterward, we address the challenge of identifying traffic lights cycled toward. A literature study finds that existing camera-based approaches are impractical for cyclists, and location-based approaches face significant issues with mismatching due to geolocation inaccuracies. A novel route-based approach is proposed that selects the best traffic lights, comparing their turn geometries with the bike route's shape. However, establishing such an approach proves challenging in many situations where the OpenStreetMap bike route does not accurately capture the actual cycling infrastructure. Out of 1,035 considered traversals of traffic lights, only 23\% are determined error-free, with 72\% of error cases resulting from routing in the center of the road instead of the appropriate bike path. Thus, spatial reasoning is found to be required to determine the best sequence of traffic lights that will be passed by the cyclist at an intersection. Several approaches are developed and tested, ultimately arriving at a machine learning model that achieves matching F1 scores of 92\% and 86.2\% validated on a separate dataset. Compared to previous online approaches, this method also provides the advantage of matching all traffic lights in advance, maximizing the possible speed advisory activation distance, and requiring a median extra time of 1.4 seconds during bike route calculation. Thus, a practical traffic light matching solution for bike-GLOSA applications could be achieved while there is still room for improvement.

Building on these results, we focus on reducing the overall number of routing errors and enhancing route alignment with actual bike paths. One emerging approach identified in related work is the usage of authoritative datasets to enhance the path network's correctness and completeness. Our concept involves replacing the entire area of Hamburg and stitching the dataset at its boundary for cross-border routing. As a result, the surface information coverage increased from 66.4\% in OpenStreetMap to 99.9\% with our approach. A comparison with hand-drawn bike lanes over satellite images indicates a substantially improved alignment with actual cycling infrastructure compared to OpenStreetMap, Google Maps, and Bing Maps routes. The generated bike routes also align closer with traffic light positions and user trajectories. In consequence, the traffic light matching F1 score is further improved by 4.74\% to 90.94\% during validation. Routing errors decrease from 77\% of marked cases to 40\%. Compared to OpenStreetMap, Bing Maps, and Google Maps, routes generated with our approach have comparable lengths while providing a more detailed geometry, suggesting they capture road bends or turn shapes more accurately. Besides traffic light matching, another specific application scenario for an accurate representation of road bends is studied: distance-to-signal estimation. Measurements show that a route-based distance-to-signal estimation is more stable with increased distance from the traffic light compared to the over-the-air distance, as briefly captured in related works. Our results indicate that, while routing via an authoritative dataset is not strictly necessary for the deployment of a bike-GLOSA application, it can benefit such an application substantially.

Finally, we propose a mobile application that provides a speed advisory based on the established framework. We study user interfaces for GLOSA in cars and bikes, finding a wide range of designs and levels of sophistication. Regarding cyclist applications, previous studies identified a challenge in choosing an optimal speed, influenced by personal limitations, intentions, and contextual factors such as wind speeds. This challenge is circumvented by an approach initially conceived for cars: projecting the traffic light prediction over a speedometer, externalizing the optimal speed decision to the user. The speed advisory is integrated with a set of wayfinding functionalities that encompass the pathway's surface information and prediction availability for an enhanced bike routing decision. Over the period of one year during the app's Beta phase, 1,655 rides and 40 questionnaires have been submitted. Detailed user feedback suggests dissatisfaction with limited prediction availability as a result of frequent data outages. Nonetheless, there is also positive feedback. The average System Usability Score is measured at 73, indicating room for improvement but exceeding 68 as a reference value for above-average usability. Quantitative studies of user approaches at intersections yield the finding that two different cases should be considered: cases with high adherence and cases with low adherence to the speed advisory. In 482 cases where users follow a green phase in the speedometer for at least 50\% of the approach's distance, the median traffic light passing speed is calculated at 18.4 km/h compared to 15.5 km/h without speed advisory. In these cases, the stop rate is reduced from 25\% without GLOSA to 15\% with GLOSA, indicating an overall higher success rate in passing the green light. In 638 cases with less than 50\% adherence, the stop rate is significantly higher at 32\%, with a lower median traffic light passing speed at 12 km/h. In these cases, users tend to roll out earlier, suggesting a reaction to a predicted arrival at red. This observation is supported by a cross-checked case study of 915 individual approaches, yielding 396 (43\%) cases where the speed advisory was not followed, including 180 (45\%) cases where no green phase was displayed or reachable. Among these 915 approaches, a stop rate of 14\% (72 out of 519) is measured when following the speed advisory. Thus, although users remain critical of the data availability, the speed advisory clearly helps cyclists traverse traffic lights more efficiently.

  \end{abstract}

  \newpage
  % \confirmation

  \tableofcontents

  % \listoffigures
  % \addcontentsline{toc}{chapter}{\listfigurename}

  % \listoftables
  % \addcontentsline{toc}{chapter}{\listtablename}

  % this is where your thesis lives

  % \nocite{jeschor2024cloudy}
  \nocite{matthes2022matching}
  \nocite{matthes2023geo}
  \nocite{matthes2023accurate}
  \nocite{matthes2022selecting}

  \input{sections/introduction.tex}
  \input{sections/prediction.tex}
  \input{sections/matching.tex}
  \input{sections/routing.tex}
  \input{sections/app.tex}
  \input{sections/conclusions.tex}

   \nocite{*}

  \newpage

  \emergencystretch=2em

  \chapter*{\bibname}
  \addcontentsline{toc}{chapter}{\bibname}
  \addcontentsline{toc}{subsection}{Published Research Papers}
  \section*{Published Research Papers}
  This thesis is based on the following peer-reviewed research papers in which the author was the principal investigator:
  \printbibliography[heading=none,nottype=student,keyword={ownpaper,related}]
  \printbibliography[heading=none,nottype=student,keyword={ownpaper,notrelated}]
  \pagebreak

  \addcontentsline{toc}{subsection}{Supervised Student Theses}
  \section*{Supervised Student Theses}
  The author of this thesis identified several topics for student theses and was involved as supervisor:
  \printbibliography[heading=none,type=student,notkeyword={ownpaper}]
  \pagebreak

  \addcontentsline{toc}{subsection}{References}
  \section*{References}
  \printbibliography[heading=none,nottype=student,notkeyword={ownpaper,notrelated},notkeyword={ownpaper,related}]
  \pagebreak
  
  % \begin{appendices}
  %   \input{sections/appendix.tex}
  % \end{appendices}

\end{document}