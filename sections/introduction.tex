\chapter{Introduction}\label{ch:introduction}

\section{Motivation}

Environmental concerns and the challenge to improve the livability of cities are key drivers in recent urban development. Especially in cities shaped by car-centric urbanism, the car is becoming increasingly problematic due to noise and air pollution as well as the narrowing of space required for parking. This issue is further amplified as more people inhabit cities. Electrifying traffic and making transportation more intelligent with cooperative transport systems is one important aspect of reducing these negative impacts and enhancing the livability of city centers \cite{seredynski_pathways_2023}. 

In parallel, an increasing number of cities are launching initiatives and pilot projects aimed at motivating more sustainable forms of mobility \cite{nieuwenhuijsen_car_2016}. A part of these projects focuses on making cycling more attractive. However, motivating more people to cycle is challenging due to two types of barriers: physical barriers and psychological barriers \cite{nieuwenhuijsen_implementing_2019}. Physical barriers relate to the expansion of cycling infrastructure, as well as supportive features such as bike rental stations and air stations. Psychological barriers involve attitudes and beliefs that hinder people from cycling. 

Since both types of barriers depend on each other, they can be considered a chicken-and-egg problem: to break down psychological barriers, barriers that physically obstruct cyclists must first be dismantled. However, this requires invasive changes to infrastructure and, consequently, citizen support. Thus, non-invasive solutions that improve the attitude towards cycling are highly desirable to accelerate the sustainable mobility transformation. A non-invasive approach involves making cycling smarter \cite{nikolaeva_smart_2019}. As traffic infrastructure and participants are increasingly networked with each other, new opportunities arise for digital solutions based on the communication of traffic-related data \cite{tran_factors_2023}.

Cities can provide digital solutions to cyclists that improve specific aspects of cycling as a complementary measure to other initiatives. One such solution is providing cyclists with a service through an app that ensures they reach a green traffic light. Known as Green Light Optimal Speed Advisory (GLOSA), this solution enables traffic participants to anticipate the switching behavior of upcoming traffic lights. Based on a prediction of these traffic lights, a speed advisory can be provided to the user. Applied to cyclists, such a solution has the potential to make cycling feel more intelligent and advantageous in general. Cyclists may choose to either accelerate and reach the green phase or conserve energy by coasting. In this manner, a GLOSA app may help cyclists reach their destination quicker or more comfortably.

Such a solution may not only be beneficial for cyclists but also for the city itself, collecting valuable data about cyclists' behaviors through the app. As part of a broader campaign, such an app may contribute to building a self-expanding cycling community. This is the challenge that Hamburg has set itself with the PrioBike project, named after the prioritization of bike mobility. Within this project, an app is to be created for Hamburg citizens that can be used free of charge and provides a GLOSA service. To support such a service, Hamburg provides real-time traffic light data for over 5,000 bike traffic lights through a centralized data broker. Based on this foundation, the main goal of this work is to realize and evaluate a GLOSA system for cyclists on the city scale. To accomplish this goal, existing solutions from the car-dominated research domain of GLOSA must be identified, and knowledge gaps for cyclist applications addressed. 

\section{Background}

Services similar to Green Light Optimal Speed Advisory were proposed as early as 2006. Back then, Sanchez et al. (2006) \cite{sanchez_predicting_2006} utilized the term "Intelligent Driver Model," showing how a system could be developed that helps drivers adapt to information from an upcoming traffic light. In 2008, Iglesias et al. \cite{iglesias_i2v_2008} proposed a perception-enhancing "Infrastructure to Vehicle Communication Driving Assistance System" that displays a traffic light's state to the driver, increasing the distance from which the traffic light's color can be seen. The idea of a "Green Wave App" recommending speeds to the user was first introduced by Otto and Hoyer (2010) \cite{otto_operating_2010}. In the same year, Tielert et al. \cite{tielert_impact_2010} introduced a "Traffic-Light-to-Vehicle-Communication" system. Then, in 2011, the term "ECO-Driving" or "ECO-Approach (and Departure)" was coined by Xia et al. (2011) \cite{xia_indirect_2011}, which would be reused over time by a few studies until today \cite{rakha_eco-driving_2011, rakha_aeris_2012, xia_field_2012, hao_eco-approach_2019, hu_lane-level_2023}. A few works in 2011 \cite{asadi_predictive_2011, raubitschek_predictive_2011} would also use the term "Predictive Cruise Control," referring to the prediction of the needed speed to pass the next traffic light at green. The first work that introduced the abbreviation GLOSA was published by Katsaros et al. in 2011 \cite{katsaros_performance_2011}, which has since become established in most studies.

\begin{figure}[t]
\centering
\resizebox{\linewidth}{!}{%
\begin{tabular}{p{0.45\linewidth}p{0.55\linewidth}}
  \includegraphics[width=\linewidth]{images/related-work-research-method.pdf} &
  \resizebox{\linewidth}{!}{\input{images/related-work-timeline.pgf}} \\
\end{tabular}
}
\caption{Identified studies in the GLOSA domain.}
\label{fig:related-work-research-method}
\end{figure}

Since 2006, 83 studies can be identified that relate directly to the topic of a traffic-light-based speed advisory system. As highlighted in \Cref{fig:related-work-research-method}, 52 studies identified as relevant are indexed through a mapping study by Mellegård et al. (2020) \cite{mellegard_day_2020} on GLOSA, with an additional 31 papers identified through cross-references and related terms. Even though the topic was introduced in 2006 and first gained traction in 2011, the overall research attention has been relatively constant ever since. This is partly due to the reason that GLOSA is considered a day-1 service of cooperative intelligent transport systems, brought forward by initiatives such as the C-ROADS project in Europe \cite{sharara_impact_2019}. Day-1 means that the service is considered to be one of the key features of future driving expected to be available in the short term \cite{mellegard_day_2020}. Nonetheless, the field of GLOSA has recently encountered a stagnation in progress, with emerging criticism from researchers who contend that the service is not progressing as rapidly as desired \cite{mellegard_day_2020, otto_framework_2023}.

One factor is the strong reliance on simulation environments, with only a few studies brought to a real-world setting (see \Cref{fig:related-work-piechart}) \cite{mellegard_day_2020}. Simulation environments are common in the field of intelligent transport systems to study novel concepts without large financial expenses, risks of collision, or other challenges of deploying a prototype in a real-world setting. Moreover, they offer the capability of  large-scale traffic simulations, including the interaction between cars and intersections, as well as realistic vehicle agent movement and fuel consumption estimation \cite{kloeppel_performance_2019, pariota_green_2019}. To further increase the realism of simulations, a few studies also simulate the loss and transmission ranges of messages for the generation of the GLOSA service \cite{sharara_impact_2019}. Some studies utilize real-world driving data for a hybrid computational (model-based) evaluation \cite{raubitschek_predictive_2011, luo_green_2017, xie_dynamic_2021, bhattacharyya_assessing_2022}. Still, as pointed out by Klöppel et al. (2019) \cite{kloeppel_performance_2019}, simulation or hybridized simulation studies have their limitations and often understudy the complexity of a real-world deployment.

\begin{figure}
\centering
\resizebox{\linewidth}{!}{%
\input{images/related-work-piechart.pgf}
}
\caption{Test or deployment environment of GLOSA studies.}
\label{fig:related-work-piechart}
\end{figure}

A key driver in research of GLOSA has been the studies by Audi and BMW, who, from 2008 to 2018, investigated GLOSA in real-world settings as part of their advanced driver assistance systems. In 2014, Protschky et al. \cite{protschky_extensive_2014, protschky_adaptive_2014} focused on the large-scale prediction of traffic-adaptive signals in Munich, laying the methodological foundation for BMW's "EnLighten" app that was developed later by Wilson et al. (2017) \cite{wilson_driver_2017} and Sokolov et al. (2018) \cite{sokolov_effects_2018}. Both studies were conducted in the USA. In the project TRAVOLUTION (2008) \cite{braun_travolution-netzweite_2009}, Audi collaborated with the city of Ingolstadt and the German firm Gevas to lay the foundation for their own GLOSA system. The system design and the first results were published in 2013 by Zweck and Schuch \cite{zweck_traffic_2013}. By that time, Audi's GLOSA system included the cities of Verona, Garmisch, and Berlin, with a total number of over 700 intersection nodes. Later, in 2017, Stahlmann et al. \cite{stahlmann_multi-hop_2017} investigated options for Audi to directly obtain the traffic light data via short-range radio communication. Finally, in 2018, Stahlmann et al. \cite{stahlmann_exploring_2018} published a paper more broadly focusing on practical problems, including automated traffic light matching -- one of the key problems discussed in this work.

All of these studies have been tested in relatively extensive areas, enabled through the initiatives and pilots brought forward by car manufacturers in collaboration with cities. Apart from these studies, only a few works have investigated GLOSA on a similar scale. Khan et al. (2021) \cite{khan_eco-drive_2021} develop a cloud-based ECO-Driving system for the city of Ottawa with access to 1178 intersections. Bhattacharyya et al. (2022) \cite{bhattacharyya_assessing_2022} utilize data from a field-operational test in Bordeaux with access to 546 intersections. The work by Bhattacharyya et al. (2022) \cite{bhattacharyya_assessing_2022} is related to the mobile apps "CTD - Mobilité connectée"\footnote{\url{https://play.google.com/store/apps/details?id=com.geolocsystems.cthedifference}}, "CoopITS"\footnote{\url{https://play.google.com/store/apps/details?id=fr.gouv.developpementdurable.coopits}}, and work on the Cooperative Urban Mobility Portal\footnote{\url{https://co-ump.eu/data-samples-glosa/}} for Bordeaux. Two other mobile apps serve as a model for this work: "TrafficPilot" (available in >10 German cities) by Gevas or "Signal2X" (available in Darmstadt) by Yunex. Unfortunately, there is almost no information that explains the technical details of these apps, which are of interest here \cite{yunex_traffic_v2x-kommunikation_2023}. Except these projects, most real-world GLOSA studies utilize a testbed with few turns, few traffic lights, and often a predefined route \cite{iglesias_i2v_2008, schweiger_elisatm_2011, raubitschek_predictive_2011, koukoumidis_signalguru_2011, koukoumidis_leveraging_2012, hao_eco-approach_2019, fickas_fast_2019, chen_developing_2022}. This means that the goal pursued in this work pushes forward into relatively unchartered terrain in the GLOSA research domain -- most real-world GLOSA studies lack the extensive coverage and complexity of a city-wide implementation.

\begin{figure}[t]
\centering
\begin{tabular}{cc}
  \footnotesize{a) Studied number of intersections} & \footnotesize{b) Studied transport modes} \\
  \includegraphics[width=0.46\linewidth]{images/related-work-scale-piechart.pdf} &
  \includegraphics[width=0.46\linewidth]{images/related-work-modes-piechart.pdf}  \\
\end{tabular}
\caption{Studied scales and transport modes. Studies not clearly stating these properties are omitted.}
\label{fig:related-work-additional-piecharts}
\end{figure}

Furthermore, almost no studies have been conducted so far on cyclists. The first identified study on GLOSA for cyclists was conducted in 2016 by Tal et al. \cite{tal_vehicular-communications-based_2016}. The goal of this simulation-based study was to develop a Speed Advisory system for Electric biCycles "SAECy." Tal et al. (2016) \cite{tal_vehicular-communications-based_2016} propose a speed advisory model that incorporates the road's inclination and measured wind speeds -- factors that are not as much of a concern with car-based GLOSA. Lu et al. (2018) \cite{lu_enhancement_2018} develop a static GLOSA system with a speed advisory display while optimizing traffic light timing to provide a green wave to cyclists. The system was evaluated through a prototype intersection and a simulation study. Two more simulation studies were conducted by Dabiri et al. (2020) \cite{dabiri_optimized_2020} focusing on cyclist modeling and possible speed profiles, as well as Halbach et al. (2021) \cite{halbach_cooperative_2021} with a small-scale simulation. The only real-world study of a GLOSA app for cyclists was conducted from 2018 to 2021 by Fickas and Schlossberg. The developed app, "FastTrack," was tested in 2019 on a small-scale test corridor (6 intersections) in Oregon \cite{fickas_fast_2019}. Auxiliary material on this study is available through the Portland State University online library \cite{fickas_green_2021, fickas_using_2021, fickas_riding_2019, fickas_webinar_2019, fickas_data_2021, fickas_project_2018}. Apart from mobile apps like TrafficPilot that offer a cyclist mode besides their main application for cars, there are no other studies that investigate GLOSA as a solution to motivate more people to cycle. 

In essence, this work aims to bridge the gap between GLOSA's current state -- largely concentrated on motorized vehicles -- and its potential application to a complete city network, with a spotlight on cyclists. The unique challenges posed by this expansive scope necessitate a reevaluation of established concepts and solutions, ensuring the development of a holistic GLOSA system.

\section{Challenges}

Apart from the general problem of the lack of focus on cyclists, the research domain surrounding GLOSA raises many interdisciplinary research issues: regulation and financing, integration and technology assessment, and possible consequences for society. This work focuses on the technical implementation of such a system and its assessment, resulting in four problems to address.

\addcontentsline{toc}{subsection}{Traffic Light Prediction}
\textbf{Traffic Light Prediction:} To provide a speed advisory for an upcoming traffic light, a prediction of the traffic light's switching behavior is required. The challenge lies in developing a robust system that is capable of seamlessly collecting real-time data from traffic lights across the city. This involves not only the integration of a data source but also the implementation of a prediction algorithm that can incorporate the recorded data and forecast the traffic light's behavior. Since a traffic light's switching behavior may depend highly on the current time and day, as well as the detected traffic density, a reliable and accurate prediction is challenging. Furthermore, there may be data outages or errors in the streamed data, which degrade the quality and trustworthiness of the prediction. Hence, achieving a highly accurate and trustworthy prediction is challenging but unquestionably paramount for the overall effectiveness of the speed advisory.

\addcontentsline{toc}{subsection}{Traffic Light Matching}
\textbf{Traffic Light Matching:} For which traffic light a speed advisory should be displayed depends on the user's planned trajectory across the next intersection(s). The extensive number of potential traffic lights across the city complicates the process, turning the identification of the matching traffic lights into a search for needles in the haystack. The system needs to efficiently and accurately pinpoint the relevant traffic lights that align with the user's route, considering factors such as distance and turn direction. The type of traffic traffic light is also important since cyclists occasionally share a traffic light with cars, buses, or pedestrians. The system should prefer dedicated traffic lights for cyclists whenever possible. Due to the often ambiguous choice in traffic lights at an intersection, the matching algorithm has to consider multiple variants and decide on the best traffic light. The challenge here lies not only in the algorithmic complexity of traffic light matching but also in ensuring real-time responsiveness to provide timely speed advisories.

\addcontentsline{toc}{subsection}{Accurate Bike Routing}
\textbf{Accurate Bike Routing:} To know which traffic lights will be along the way, this work will utilize a route-based approach for trajectory prediction and distance-to-signal estimation. This means that calculating a route accurately resembling bike trails is crucial for the speed advisory's accuracy. However, existing routing foundations are designed as general-purpose maps with a focus on motorists, meaning that bike paths are often missing or tagged inconsistently. One key focus of this work is, thus, to find methods that allow a more accurate bike routing to enhance the overall in-app experience and provide a solid foundation for an accurate speed advisory.

\addcontentsline{toc}{subsection}{Speed Advisory}
\textbf{Speed Advisory:} As cyclists navigate with the GLOSA app through the urban landscape, it becomes essential to tailor speed advisories to their individual needs and the context of their journey. This involves reducing cognitive load on the user as much as possible, allowing the cyclist to focus on the real-world situation. Maximizing the usefulness of the advisory system involves striking a balance between providing targeted speed advisories and avoiding unnecessary distractions. Factors such as the road's inclination, surface quality, and the type of bike being used are also crucial to determining the best route and speed advisory. Having solved these challenges, we can deploy the mobile application in a large-scale context and evaluate its impact. One major challenge is finding metrics that decrypt the recorded user data into meaningful insights about the impact of GLOSA on cycling behavior. A multifaceted approach is necessary to tackle this, encompassing quantitative and qualitative data. Understanding user perspectives is vital for ensuring that GLOSA aligns with user expectations and integrates seamlessly into their cycling routines. 

Together, these challenges represent the framework for this work to demystify the overarching question of how well the idea of GLOSA adapts to cyclists in a large-scale, real-world setting. By addressing one problem by one, this study aims to draw potential repercussions and future work of implementing GLOSA for cyclists.

\section{How to Read This Thesis}

This work is split into  

First, in \Cref{ch:prediction}, \Cref{ch:matching}, \Cref{ch:routing}, and \Cref{ch:app}, we will look at the specific challenges that must be overcome to deploy such a system on the city scale. This leads to the top-level architecture highlighted in \Cref{fig:outline}, in which the developed concept parts work in interaction to provide the desired bike-GLOSA service. Secondly, this allows us to test the application together with Hamburg's citizens and investigate its reception, learning about the impacts of such a system in \Cref{ch:impacts}.

\begin{figure}[h]
  \caption{Top level architecture of the proposed system.}
  \includegraphics[width=\linewidth]{images/outline.png}
  \label{fig:outline}
\end{figure}

In \Cref{ch:prediction}, we will learn more about the different architectures for traffic light data infrastructures and how these impact speed advisory services. In particular, we will study prediction algorithms that provide a way for the app to look into the future and predict a signal's switching behavior and how this information is sent to the mobile app. The contribution of this work aims to understand Hamburg's system "Traffic Lights Data" (TLD) more thoroughly as a potential role model for other cities and critically review previous approaches.

After establishing a solid foundation and understanding of traffic light prediction, we will develop a solution in \Cref{ch:matching} that allows our app to match all signals along the user's trajectory. Unlike previous works, we will choose a new way of matching with a route-based approach. This will allow our app to easily predict the user's trajectory and efficiently match all signals in advance. As a bonus, the proposed system will circumvent any matching problems associated with inaccurate geolocation that impacted previous solutions.

In \Cref{ch:routing}, we will investigate how we can use Hamburg's reference maps for bike paths to provide a much more accurate routing than possible with open routing foundations. The idea is to utilize institutionally maintained routing foundations, so-called reference models, to provide consistent and accurate bike routing.

Up until this point, the discussions will mainly relate to the processes that must run in the backend of the GLOSA system. In \Cref{ch:app}, we will shift our perspective onto the mobile app with which real users will interact. We will look at various ideas to reduce distraction and enhance context-adaptiveness, including multiple different speed advisory user interfaces. As a product, we obtain a mobile application interleaved with a backend infrastructure implementing the concepts of this work.

With the obtained software infrastructure, we can roll out the application to users in Hamburg and run an extensive and realistic study. In \Cref{ch:impacts}, we will collect user telemetry and user feedback to look behind the scenes at how well the system works on a city scale. Various data analysis methods, including a calculation of the System Usability Score, will enable us to draw comparable results from the field test, which can be revisited in future studies that further improve upon the developed system.

\Cref{ch:conclusions} summarizes the gained knowledge and main results and gives an outlook for future studies. 
